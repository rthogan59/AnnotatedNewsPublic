# Annotated News Extension

## Project Overview

* See the final paper for more details on each specific. Additionally, the diagram referenced below is located in the repo (UMLDiagram.png) My code is mostly contained within the initialTesting folder

## AY2022-1 Paper Text:

* Abstract: This independent study was designed to address the tendency of consumers of online news to rely on only a few sources of news to form their opinions on current events. This often results in segments of the population reading news that confirms their current worldview, while not ever having that worldview challenged.  In order to solve this problem, CDT Aiden Roberts and I sought to create a Google Chrome extension that automatically ‘annotates’ an online news article with relevant information pulled from other news sites across the political spectrum via the process detailed in our UML diagram (Appendix A). While CDT Roberts worked on the user interface of the extension, I worked on the back-end portion processing a news article being viewed by a user to actually create annotations to send to the user.


## Introduction
Confirmation bias, in which a person tends to place more value on new information that affirms what they currently believe, is aided by the prevalence of news outlets that lean to one side of the political spectrum, and by people who are likely to view only news outlets that report in a way they agree with politically. In an increasingly polarized nation, it is important to make sure voters are aware of arguments on both sides of the aisle to ensure they are well-informed.

Annotated News is being developed to help solve this problem by creating more informed consumers of online news. By linking news articles with other political viewpoints on a topic and providing objective facts above key figures and events in an article, we aim to make readers more knowledgeable about current events.
We are in the process of creating a Google Chrome extension that automatically loads annotations on an online news page when a user has it enabled. Currently, we have functionality for finding relevant articles and linking them to sentences in the original article to provide more context. We also have a polished user interface for the extension. This extension was created in Python and JavaScript.

While programs exist that will identify political bias in articles, we have been unable to find a Chrome Extension that will take a news article, analyze it for political bias, find other news articles on the same topic but with a different political viewpoint, and provide annotations that bring in snippets of these other articles to provide context and facts on the subject. Additionally, we want to make this extension as accessible and easy-to-use as possible, which Google Chrome enables through easy addition of extensions to a user’s browser. This paper will explore the design methods utilized in creating this extension, our current progress, and our goals for next semester.

## Background and Motivation
We hope to provide readers of online news with a simple method of finding more context for a topic they are reading an article about. Many users might not take the extra step of researching more information to find out about other viewpoints on a subject, so we hope to make it easy for them to access this information. Additionally, the political divide between various news outlets is such that consumers of news from different sources may not even agree on the truthfulness of objective, factual information.  Ideally, we hope to mitigate this through our end-goal of creating a better-educated populace who are respectful and understanding of other viewpoints.

As stated previously, programs currently exist to identify political bias of news outlets. Mediabiasfactcheck.com  is a good example of this. By analyzing headlines, word choice, and sources provided, this site attempts to objectively classify political bias. Another site, the Bipartisan Press, uses artificial intelligence, including BERT (also used in Annotated News and discussed below), to classify articles . Our goal is to extend the classification of an article based on political bias to include finding other articles with differing political bias and present information from these articles to the user.

We intend to present this information to the user as a Google Chrome Extension. Extensions are add-ons to the Chrome Browser that allow users to “customize” their browser experience by altering or adding to the code displaying the page.  Anyone can create an extension and list it on the Chrome Web Store for Chrome users to download and use instantly. This provides us with an easy way to get our code out to users upon completion.

## Methodology
To create this extension, we had to create a basic user interface, as well as provide server functionality for taking a webpage, finding relevant news articles, and returning them as annotations on the user’s screen. My portion of the independent study focused on this back-end functionality (Appendix A: Blocks 4-10).

In creating the back-end functionality for the extension, I designed my program as follows. First, the server receives a .json representation of the webpage a user is viewing and stores it (Appendix A: Block 3). This server is being run using Flask . Flask is an easy-to-use python module for creating server functionality with extensive support in Visual Studio Code (my IDE of choice), so the shallow learning curve made it ideal for our purposes. Using the URL and the Python requests  and BeautifulSoup  modules, the server converts the article title into a list of keywords and searches news sites for this search phrase (Appendix A: Block 6). Again, the shallow learning curve required to use these Python modules, as well as the wide range of features they offer, drastically increased the speed of creating this program. Through testing, I found that these title keywords make ideal search terms regardless of the news site one is visiting. A list of URLs of relevant articles is returned. The server then gets the text from the article and the relevant articles (Appendix A: Blocks 8,10). These text blocks are split into sentences and encoded using a Bidirectional Encoder Representations from Transformers (BERT) Model, a type of model designed to support natural language processing.  Through testing of three BERT models used in measuring text similarity, I chose the ‘bert-base-nli-mean-tokens’ model based on the fact that it returned sentences that I believe were more similar to each other than the other two models . More testing, mainly testing based on time required to encode data, will be required to ensure this is the best model for our purposes. 

Each sentence in the main article is compared to each of the sentences in the relevant articles using cosine similarity — a method which, independently of the length of the sentences, creates two vectors containing arrays of the words in the sentences and measures the closeness of their angles  — to determine their level of similarity. This was done to find sentences from other sources that cover the same topic as the original but may provide a different viewpoint. A sufficiently high similarity (> 0.83), referred to as similarity_value, will result in a tuple being returned consisting of the original article sentence and the relevant article sentence. These relevant sentences, as well as their URLs, are presented to the user as annotations, in which a user can hover over the original sentence and view the relevant sentence and the URL for the article containing it. The similarity_value at which I began to see a manageable (<10) number of results for a website was 0.83. I defined manageable as less than 10 because I wanted to have enough sentences to create annotations with, but not so many that the annotations become overwhelming to the user. Additionally, a similarity_value higher than 0.83 would have resulted in sentences that were too similar to provide differing viewpoints on a topic, negating the purpose of the annotations.

I faced several challenges in the development process. The first one deals with time. Currently, the time required to find the similar sentences and pair them with sentences from the original article is around 15 seconds, with 8 seconds of additional time required to find relevant articles, split them into sentences, and encode these sentences using the BERT Model. I believe this response time is too slow to provide a good user experience. Additionally, much of the code required to run the extension was written by CDT Aiden Roberts. He designed the front-end as well as providing an architecture for the back end. Understanding the current code that CDT Roberts had written required me to sit down with him and discuss what individual pieces of code did, as I wasn’t familiar with Flask or how to create an extension.

## Results
This extension is still under development and has not been fully tested yet. As such, no data has been generated on people using this extension (including the server code) to view a news article. However, CDT Roberts designed a study to test the impact of a fully annotated site (with manually created annotations) on the political viewpoints of cadets. He is still awaiting results on this study.

## Conclusions and Future Work
Next semester, I hope to be able to implement a feature in the extension that asks for user-input on the experience using the extension and to what extent it helped inform them about an event. I would also like to provide functionality for the server to return the annotations to the user in a human-readable format, determine the political bias of an article and find articles from news sites that tend to lean in a different political direction, implement locality-sensitive hashing to reduce the time required to pair sentences together based on similarity , and test using GPU cores to parse article text.

We are well on our way to creating a fully automated extension that can achieve our goal of providing context to the public on political events they read about online. The biggest hurdles remain the time required to return data to the user and being able to return results across the political spectrum. Additionally, studies on the actual impact that the extension has on users will be crucial to understanding how beneficial it is in reducing the effect of the political echo chamber.

## Sources
* https://www.theguardian.com/science/blog/2017/dec/04/echo-chambers-are-dangerous-we-must-try-to-break-free-of-our-online-bubbles
* https://flask.palletsprojects.com/en/2.0.x/
* https://docs.python-requests.org/en/latest/
* https://www.crummy.com/software/BeautifulSoup/bs4/doc/
* https://searchenterpriseai.techtarget.com/definition/BERT-language-model
* https://towardsdatascience.com/bert-for-measuring-text-similarity-eec91c6bf9e1
* https://web.iitd.ac.in/~sumeet/Slaney2008-LSHTutorial.pdf
